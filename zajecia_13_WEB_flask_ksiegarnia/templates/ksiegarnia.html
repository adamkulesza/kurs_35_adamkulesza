<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ksiegarnia</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
</head>
<body>
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Adamowa Ksiegarnia</a>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ms-auto mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Strona główna</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Historia</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
<div class="container mt-4 text-center">
  <h2 class="mb-4">Stan magazynowy:</h2>
  <div class="d-flex justify-content-center">
    <table class="table" style="width: auto;">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Tytul</th>
          <th scope="col">Autor</th>
          <th scope="col">Rok wydania</th>
          <th scope="col">Ilosc na stanie</th>
          <th scope="col">Kategoria</th>
          <th scope="col">Ilosc</th>
          <th scope="col">nr ISBN</th>
          <th scope="col">Cena</th>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        {% for book in ksiegozbior %}
        <tr>
          <th scope="row">1</th>
          <td>{{ book.tytul }}</td>
          <td>{{ book.autor }}</td>
          <td>{{ book.rok_wydania}}</td>
          <td>{{ book.ilosc_na_stanie}}</td>
          <td>{{ book.kategoria}}</td>
          <td>{{ book.ilosc}}</td>
          <td>{{ book.ISBN}}</td>
          <td>{{ book.cena }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
  <div class="container mt-4 text-center">
  <h2>Saldo:</h2>
  <h2>{{ saldo }}</h2>
  </div>
  <div class="d-flex justify-content-center gap-5 mt-5">
    <div>
      <form method="post">
        <fieldset>
          <legend>Dodaj nową książkę do koszyka</legend>
          <div class="mt-3">
            <label for="autorTextInput" class="form-label">Autor</label>
            <input type="text" id="autorTextInput" class="form-control" placeholder="Autor" name="autor">
          </div>
          <div class="mt-3">
            <label for="titleTextInput" class="form-label">Tytuł</label>
            <input id="titleTextInput" class="form-select" placeholder="Tytul" name="tytul">
          </div>
          <div class="mt3">
            <label for="yearTextInput" class="from-label">Rok wydania</label>
            <input type="number" id="yearTextInput" class="form-control" placeholder="Rok wydania" name="rok_wydania">
          </div>
          <div class="mt3">
            <label for="quantityTextInput" class="from-label">Ilość na stanie</label>
            <input type="number" id="quantityTextInput" class="form-control" placeholder="Ilość na stanie" name="ilosc_na stanie">
          </div>
          <div class="mt3">
            <label for="categoryTextInput" class="from-label">Kategoria</label>
            <input type="text" id="categoryTextInput" class="form-control" placeholder="Kategoria" name="kategoria">
          </div>
          <div class="mt3">
            <label for="quantityTextInput2" class="from-label">Ilość</label>
            <input type="number" id="quantityTextInput2" class="form-control" placeholder="Ilość" name="ilosc">
          </div>
          <div class="mt3">
            <label for="ISBNTextInput" class="from-label">ISBN</label>
            <input type="text" id="ISBNTextInput" class="form-control" placeholder="ISBN" name="isbn">
          </div>
          <div class="mt3">
            <label for="priceTextInput" class="from-label">Cena</label>
            <input type="number" id="priceTextInput" class="form-control" placeholder="Cena" name="cena">
          </div>
          <input type="hidden" name="form_type" value="add_book">
          <button type="submit" class="btn btn-primary mt-4">Kup książke</button>
        </fieldset>
      </form>
    </div>
    <div>
      <form method="post">
        <fieldset>
          <legend>Wypożycz książkę</legend>
          <div class="mt-3">
            <label for="autorWypozyczTextInput" class="form-label">Autor</label>
            <input type="text" id="autorWypozyczTextInput" class="form-control" placeholder="Autor" name="autor">
          </div>
          <div class="mt-3">
            <label for="titleWypozyczTextInput" class="form-label">Tytuł</label>
            <input id="titleWypozyczTextInput" class="form-select" placeholder="Tytul" name="tytul">
          </div>
          <div class="mt3">
            <label for="yearWypozyczTextInput" class="from-label">Rok wydania</label>
            <input type="number" id="yearWypozyczTextInput" class="form-control" placeholder="Rok wydania" name="rok_wydania">
          </div>
          <div class="mt3">
            <label for="ISBNWypozyczTextInput" class="from-label">ISBN</label>
            <input type="text" id="ISBNWypozyczTextInput" class="form-control" placeholder="ISBN" name="ISBN">
          </div>
          <input type="hidden" name="form_type" value="borrow_book">
          <button type="submit" class="btn btn-primary mt-4">Wypożycz książkę</button>
        </fieldset>
      </form>
    </div>
    <div>
      <form method="post">
        <fieldset>
<!--          <legend>Zmien saldo</legend>-->
          <div class="mb-3">
              <label for="saldoTextinput" class="form-label">Nowe saldo</label>
              <input type="number" id="saldoTextInput" class="form-control" placeholder="Nowe saldo" name="saldo">
          </div>
          <input type="hidden" name="form_type" value="change_balance">
          <button type="submit" class="btn btn-primary mt-4">Zmień saldo</button>
        </fieldset>
      </form>
    </div>
    <div>
  </div>
</div>
<div class="container mt-5">
  <h2>Historia zakupów</h2>
  <ul>
    {% for h in historia if h.typ == "zakup" %}
      <li>{{ h.tytul }} — {{ h.ilosc }} szt. — ISBN: {{ h.ISBN }}</li>
    {% endfor %}
  </ul>
</div>
</body>
</html>
